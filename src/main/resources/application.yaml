spring:
  application:
    name: container-with-jib
  cloud:
    kubernetes:
      config:
        enabled: true
        paths: /app/resources/secrets
      secrets:
        enabled: true
        paths: /app/resources/secrets/value
        sources:
          - name: /app/resources/secrets/value
      #        namespace: container-with-jib
#        sources:
#          - name: container-with-jib-secret
      reload: # This is the section for dynamic reloading
        enabled: true
        mode: polling
        monitoring-secrets: true
        namespaces: container-with-jib
        period: 5000ms
        strategy: refresh

#value: ${classpath:value}
logging:
  level:
    org.springframework.cloud.kubernetes: DEBUG
    org.springframework.cloud.kubernetes.client: DEBUG
    org.springframework.cloud.kubernetes.client.config: DEBUG
    org.springframework.cloud.kubernetes.client.secrets: DEBUG
management:
  health:
    refresh:
      enabled: true
  endpoints:
    web:
      exposure:
        include: "refresh, health, prometheus, restart"
    access:
      default: unrestricted
  endpoint:
    restart:
      access: unrestricted
    refresh:
      access: unrestricted
    health:
      show-details: always
      access: unrestricted
      probes:
        enabled: true
    prometheus:
      access: unrestricted
    resume:
      enabled: true
server:
  port: ${server_port:80}
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/plain
    min-response-size: 1024


resilience4j:
  circuitbreaker:
    instances:
      Test:
        minimum-number-of-calls: 4
        sliding-window-size: 8
